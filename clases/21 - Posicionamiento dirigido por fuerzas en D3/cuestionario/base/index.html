<!DOCTYPE html>
<html>
    
  <head>
    <meta charset="utf-8">
    <title>Cuestionario: posicionamiento por fuezas en D3.js</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
  </head>

  <body>
    
    <script>
      const width = 600;
      const height = 600;

      const margin = {
        top: 50,
        bottom: 50,
        left: 50,
        right: 50,
      };

      const svg = d3
        .select("body")
        .append("svg")
        .attr("width", width)
        .attr("height", height);

      const iniciarSimulacion = (nodos, enlaces) => {
        const simulacion = d3
          .forceSimulation(nodos)
          .force(
            "enlaces",
            d3
              .forceLink(enlaces)
              .id((d) => d.nombre)
              .distance(50)
          )
          .force("carga", d3.forceManyBody().strength(-60))
          .force("colision", d3.forceCollide(10))
          .force("centro", d3.forceCenter(width / 2, height / 2));

        const lineas = svg
          .append("g")
          .attr("stroke", "#999")
          .attr("stroke-opacity", 0.6)
          .selectAll("line")
          .data(enlaces)
          .join("line")
          .attr("stroke-width", 2);

        const circulos = svg
          .append("g")
          .attr("stroke", "#fff")
          .attr("stroke-width", 1.5)
          .selectAll("circle")
          .data(nodos)
          .join("circle")
          .attr("r", 10)
          .attr("fill", (d) => d.color);
      };

      d3.json("https://raw.githubusercontent.com/PUC-Infovis/syllabus-2021/main/cuestionario-21/datos.json")
        .then((datos) => {
          const nodos = datos.nodos;
          const enlaces = datos.enlaces;
          iniciarSimulacion(nodos, enlaces);
        })
        .catch((error) => {
          console.log(error);
        });

    </script>
  </body>
</html>